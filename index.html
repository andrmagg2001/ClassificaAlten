<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClassificAlten</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/bulma.css">
</head>
<body>
  <section class="hero is-primary is-small">
    <div class="hero-body">
      <div class="columns is-vcentered">
        <!-- Colonna per il logo -->
        <div class="column is-narrow">
          <svg width="74px" height="120px" viewBox="0 0 74 120" xmlns="http://www.w3.org/2000/svg">
            <polygon fill="#FFF02A" points="62.7678019 2.99071207 70.473065 2.99071207 70.473065 105.737461 3.00185759 105.737461 3.00185759 84.8470588"></polygon>
            <polygon fill="#EB212E" points="2.96842105 2.96842105 3.00185759 84.676161 62.7640867 2.99071207"></polygon>
            <path d="M73.4860681,108.687307 L0,108.687307 L0,0 L73.4860681,0 L73.4860681,108.687307 Z M2.7752322,105.912074 L70.7108359,105.912074 L70.7108359,2.7752322 L2.7752322,2.7752322 L2.7752322,105.912074 Z" fill="#FFFFFF"></path>
            <path d="M1.57894737,1.57894737 L1.57894737,107.108359 L71.9034056,107.108359 L71.9034056,1.57894737 L1.57894737,1.57894737 Z M69.1318885,4.35417957 L69.1318885,104.333127 L4.35417957,104.333127 L4.35417957,4.35417957 L69.1318885,4.35417957 Z" fill="#000000"></path>
            <polygon fill="#0096D7" points="61.7609907 4.36904025 1.71640867 86.3739938 8.69349845 86.6897833 61.2334365 15.4402477"></polygon>
            <polygon fill="#000000" points="54.326935 52.8148607 26.7380805 34.5882353 56.5040248 19.679257"></polygon>
            <polygon fill="#000000" points="52.625387 83.1380805 32.2365325 83.1455108 42.479257 65.3535604"></polygon>
            <path d="M37.549226,93.1541796 C37.593808,88.9560372 46.8371517,89.2978328 50.6563467,93.1541796 L37.549226,93.1541796 Z" fill="#EB212E"></path>
            <path d="M4.93374613,118.209288 L3.81919505,119.643344 L1.04396285,119.643344 L6.31578947,112.662539 L8.35913313,112.662539 L13.4897833,119.628483 L10.6736842,119.628483 L9.63343653,118.194427 L4.93374613,118.209288 Z M7.21114551,114.657585 L7.17399381,114.657585 L5.6879257,117.128173 L8.91640867,117.128173 L7.21114551,114.657585 Z"></path>
            <polygon points="22.4879257 118.491641 26.203096 118.491641 26.203096 119.628483 19.8501548 119.628483 19.8501548 112.840867 22.4879257 112.840867"></polygon>
            <polygon points="37.0105263 119.628483 34.3727554 119.628483 34.3727554 113.981424 31.6458204 113.981424 31.6458204 112.826006 39.752322 112.826006 39.752322 113.981424 37.0105263 113.981424"></polygon>
            <polygon points="48.8990712 113.996285 48.8990712 115.482353 53.0934985 115.482353 53.0934985 116.656347 48.8990712 116.656347 48.8990712 118.513932 53.2569659 118.513932 53.2569659 119.628483 46.2613003 119.628483 46.2613003 112.840867 53.2569659 112.840867 53.2569659 113.996285"></polygon>
            <polygon points="60.5572755 112.662539 62.4594427 112.662539 69.577709 117.417957 69.6148607 117.417957 69.6148607 112.840867 72.2489164 112.840867 72.2489164 119.780805 70.3467492 119.780805 63.228483 115.025387 63.1950464 115.025387 63.1950464 119.628483 60.5572755 119.628483"></polygon>
          </svg>
        </div>
        <!-- Colonna per il testo -->
        <div class="column">
          <h1 class="title has-text-black has-text-centered">ATP Alten Ranking</h1>
        </div>
      </div>
    </div>
  </section>
  
  <main>
    <section class="section">
      <div class="container">
        <div class="title" style="color: white;">Ranking</div>
        <table id="leaderboard" class="table is-striped is-hoverable is-bordered is-fullwidth">
          <thead>
            <tr class="">
              <th>Posizione</th>
              <th>Foto</th>
              <th>Nome</th>
              <th>Punteggio</th>
              <th>Vittorie</th>
              <th>Sconfitte</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dati dinamici inseriti da JavaScript -->
          </tbody>
        </table>
      </div>
    </section>

    <section class="section">
      <div class="title" style="color: white;">Ranking Update</div>
      <div class="container">
        <div class="box">
          <!-- Input Area 1 -->
          <div class="field">
            <label class="label">Row ID</label>
            <div class="control">
              <input id="rowId" class="input" type="text" placeholder="Your ID Here">
            </div>
          </div>
          
          <!-- Input Area 2 -->
          <div class="field">
            <label class="label">Points Obtained</label>
            <div class="control">
              <input id="points" class="input" type="text" placeholder="Enter your points here">
            </div>
          </div>
          
          <!-- Button -->
          <div class="field is-grouped is-justify-content-flex-end">
            <div class="control">
              <button id="submitBtn" class="button is-primary">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const initialData = [
      { "name": "Andrea", "wins": 4, "losses": 4, "foto": "images/players/Andrea.png", "score": 3.25 },
      { "name": "Giuliano", "wins": 6, "losses": 2, "foto": "images/players/Giuliano.png", "score": 5 },
      { "name": "Matteo DP", "wins": 1, "losses": 3, "foto": "images/players/MatteoDP.png", "score": 1 },
      { "name": "Luca", "wins": 2, "losses": 3, "foto": "images/players/Luca.png", "score": 2 },
      { "name": "Stefano", "wins": 3, "losses": 2, "foto": "images/players/Stefano.png", "score": 3 },
      { "name": "Luis", "wins": 4, "losses": 2, "foto": "images/players/lvi.png", "score": 4 },
      { "name": "Valerio L", "wins": 1, "losses": 3, "foto": "images/players/ValerioL.png", "score": 1 },
      { "name": "Daniele A", "wins": 0, "losses": 2, "foto": "images/players/DanieleA.png", "score": 0 },
      { "name": "Federico", "wins": 0, "losses": 0, "foto": "images/players/Federico.png", "score": 0 },
      { "name": "Pier Giorgio", "wins": 0, "losses": 0, "foto": "images/players/pgd.jpg", "score": 0 },
      { "name": "Gianmarco", "wins": 0, "losses": 0, "foto": "images/players/Zizzo.png", "score": 0 },
      { "name": "Matteo M", "wins": 1, "losses": 2, "foto": "images/players/MM.png", "score": 1 },
      { "name": "Silvia", "wins": 0, "losses": 0, "foto": "images/players/Silvia.png", "score": 0 },
      { "name": "Valerio B", "wins": 0, "losses": 1, "foto": "images/players/ValerioB.png", "score": 0 }
    ];

    // Salva i dati iniziali nel localStorage se non esistono
    if (!localStorage.getItem('leaderboardData')) {
      localStorage.setItem('leaderboardData', JSON.stringify(initialData));
    }

    // Carica la leaderboard dal localStorage
    function loadLeaderboard() {
      const leaderboardData = JSON.parse(localStorage.getItem('leaderboardData'));
      const tbody = document.querySelector('#leaderboard');
      tbody.innerHTML = '';

      leaderboardData.sort((a, b) => b.score - a.score);

      leaderboardData.forEach((player, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>
            <img src="${player.foto}" alt="${player.name}" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
          </td>
          <td>${player.name}</td>
          <td>${player.score}</td>
          <td>${player.wins}</td>
          <td>${player.losses}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Funzione per aggiornare il punteggio
    function updateScore(rowId, points) {
      const leaderboardData = JSON.parse(localStorage.getItem('leaderboardData'));
      const player = leaderboardData.find(p => p.name === rowId);

      if (player) {
        player.score += parseFloat(points);  // Incrementa il punteggio
        localStorage.setItem('leaderboardData', JSON.stringify(leaderboardData));  // Salva nel localStorage
        alert('Punteggio aggiornato!');
        loadLeaderboard();  // Ricarica la leaderboard
      } else {
        alert('Giocatore non trovato!');
      }
    }

    // Gestione del click sul pulsante di invio
    document.getElementById('submitBtn').addEventListener('click', () => {
      const rowId = document.getElementById('rowId').value;
      const points = document.getElementById('points').value;

      if (rowId && points) {
        updateScore(rowId, points);
      } else {
        alert('Per favore, compila tutti i campi!');
      }
    });

    // Carica la leaderboard all'inizio
    loadLeaderboard();
  </script>
</body>
</html>